=======================
Centreon Broker 20.10.3
=======================

****
Bugs
****

Conflict manager and comments
=============================
It is possible to lock the database during comments insertion. This new version
fixes that.

Bam reporting dimensions computation
====================================
If there are retention files, dimensions computation could fail because of
conflicts between new block computation and old ones (the ones in the
retention). There was also an issue of concurrent access to tables during
dimensions computation.

Bam reporting durations
=======================
When availabilities are computed, durations can be doubled. This new version
fixes this issue.

***********
Enhancement
***********

Logs
====
Logs are sent to the database in bulk as we already do for customvariables.

Lua
===
There is a new api available for the lua connector. To use it scripts must
declare a global variable `broker_api_version=2`. From the user's point of view,
stream connectors should work almost the same. In isolate cases, we could see
scripts that do not work with this new api, then you can always work with
broker_api_version 1, by setting the variable to 1 or by removing this variable
declaration in the script. Why should we use the v2 version? Because it is
faster, really faster.

=======================
Centreon Broker 20.10.2
=======================

****
Bugs
****

TLS
===
Credentials were no more loaded by the TLS connector. This is fixed with this
new version.

Custom variables
================
They were updated several times in the database. It is fixed now.

=======================
Centreon Broker 20.10.1
=======================

****
Bugs
****

Builds
======
Build on Centos8 fixed.

Retention files
===============
The splitter class is now thread safe and does not need external locks anymore.
It is also far less strict and allows some reading and some writing at the same
time.

TCP
===
Writing on a tcp stream could slow down in case of many retention files. The
issue was essentially in the flush internal function.

************
Enhancements
************

Command line argument
=====================
It is now possible to set the cbd pool size directly on the command line with
the --pool_size X argument or -s X.

Statistics
==========
The thread pool has now its own statistics. For now, we have two informations
that are the number of threads it contains and its latency in milliseconds that
is the duration we have to wait to see a task executed. We post a task to the
thread pool at time T1, it is executed by the thread pool at time T2, the
latency is T2 - T1.

TCP connections
===============
TCP streams are really faster, especially when broker has retention files and
there are a lot of traffic.

SQL and storage streams
=======================
Those streams have several improvements:
* events exchanges are really faster, especially when broker has retention
  files.
* Several queries have been changed to insert data in bulk, it is the case for
  custom variables and metrics.
* There are cases where those streams could crash that have been also fixed.

=======================
Centreon Broker 20.10.0
=======================

************
Enhancements
************

Watchdog
========
The watchdog is lighter and does no more need all the broker libraries.
