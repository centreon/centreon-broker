####
FAQ
####

* I heard that Centreon Broker can replace NDOutils. But where are
  **ndomod** and **ndo2db**?

    In Centreon Broker, you do not have direct replacements for the
    **ndomod** and **ndo2db** software. Instead you have a **NEB module**
    and a **binary** ; but both have the same features ! This means that
    if you have a small setup, you'll only need to configure the NEB
    module which will directly write to the database. No need of extra
    administration for a daemon ! On the other hand, large setup can move
    load from the monitoring servers to a single centralized daemon that
    will insert all data in the database.

* The Broker module is not working. I only get the message
  "Function nebmodule_init() in module '/path/to/cbmod.so'
  returned an error. Module will be unloaded." in the logs of my
  monitoring engine.

    Check that the log file(s) you configured exist and have proper
    rights. It need to be writable by the user under which your
    monitoring engine runs.

* Cannot load Broker modules: "could not load library
  '/path/to/10-neb.so': Cannot load library /path/to/10-neb.so:
  (/path/to/10-neb.so: undefined symbol: _ZTIN3com8centreon6broker2io4dataE)"
  (or similar)

    You are proba''Code Text''bly using Nagios. Your options are 1) use
    Centreon Engine or 2) recompile Nagios.

    For Centreon Engine, the installation process is described
    :ref:`here <centreonengine:user_installation>`.

    If you choose to use Nagios, you need to recompile it with the ltdl
    library disabled. For this either 1) temporary move the ltdl.h header
    file (probably located in /usr/include) or 2) remove the libltdl-dev
    package (or similar). To check if your recompilation was successful
    run::

      $ objdump -T /path/to/nagios | grep dlopen

    The output shall **not** contain lt_dlopen, only dlopen.

* How can I rotate the Broker logs?

    Centreon Broker never release handles to log files. This means that
    the recommanded way to rotate Broker logs it to 1) copy the log file
    and 2) truncate it. You'll find below a sample **logrotate**
    configuration file that do just that.::

      /var/log/centreon-broker/*log {
      compress
      daily
      notifempty
      missingok
      rotate 7
      size 100M
      copytruncate
      }
